<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/css/sobrenos.css">
    <link rel="stylesheet" href="/css/navbar.css">
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/style_perfil.css">
    <link rel="stylesheet" href="/css/style_calendar.css">
    <link rel="stylesheet" href="../bootstrap-4.1.3-dist/css/bootstrap.min.css">
    <script type="text/javascript" src="../bootstrap-4.1.3-dist/js/bootstrap.min.js"></script>

    <title>Perfil</title>

    <script src="/scroll.js"></script>
    <script src="/utilites.js" defer></script>
    <script type="text/javascript" src="/scripts/login_app.js" defer></script>

    <script>
        usuario = JSON.parse(sessionStorage.getItem('user'))
        if (usuario === null) {
            window.location.href =  window.location.href.replace("perfil-paciente.html","") + "login.html"
        }
    </script>
    


</head>
<body onload="loadCalendar(), changePerfilData()">
    <header>
        <nav class="nav-main">
        <div class="grid-container-nav">
            <div class="row nav-container-row grid-fluid">
                <div class="col-md-2" style="display: flex; padding-bottom: 0.75em;"> 
                    <a href="home.html">
                        <img src="/img/logo_p3.png" class="logo_size" alt="logo" style="cursor: pointer;"/>
                    </a>
                </div>
                <div class="col-md-3">
                    <div class="cont-nav-center">
                        <a class="nav-item nav-link" href=""> Planos</a>
                        <a class="nav-item nav-link" href=""> Artigos</a>
                        <a class="nav-item nav-link" href="/pages/sobrenos.html"> Sobre nós</a>
                    </div>
                </div>
                <div class="col" style="display: flex; justify-content: flex-end;">  
                    <div class="nav-right-buttons">
                        <button type="button"  class="nav-btn"
                            style="background-image: url('/img/magnifying-glass-solid.png');">
                        </button>  
                        <button type="button"  class="nav-btn"
                            style="background-image: url('/img/user-regular.png');
                            margin-right: 20%;">
                        </button>
                        <button type="button"  onclick="logout()" class="nav-btn nav-btn-logout"
                        style="background-image: url('/img/user-logout3.png');">
                        </button> 

                    </div>
                </div>
            </div>
        </div>

        </nav>
    </header>

    <section>    
        <div class="container-perfil">              
        <div class="card-perfil-main">
            <div class="card-perfil-container" style="color: white;">
                <div class="foto-perfil">
                    <img id="perfilFoto" src="/img/cliente_ex.png">
                </div>
                <div class="card-perfil-content">
                    <h2 id="perfilNome">
                        Nome Sobrenome
                    </h2>
                    <p>Idade:   </p>
                    <p>Local:   </p>
                    <p>Contatos:</p>
                    <div style="display: flex; align-items: center;">
                        <button type="button" class="perfil-btn" onclick="copyNumber()"
                            style="background-image: url('/img/clipboard.png');">
                        </button>   
                        <span id="cell-n" style="padding-left: 5%;">+55 11 9000-0000</span>

                    </div>

                </div>
            </div>

        </div>
        <div class="container-perfil-row">
            <div class="container-perfil-col-2">
                <div class="container-perfil-row-2">
                    <div id="calendarContainer" class="container-calendar">
                        <p id="monthName">Outubro</p>
                        <div class="container-calendar-2">
                            <div id="calendar" class="calendario">
                                <div class="dias">
                                    <div id="dia_c" class="dia-cabecalho">Dom</div>
                                    <div id="dia_c" class="dia-cabecalho">Seg</div>
                                    <div id="dia_c" class="dia-cabecalho">Ter</div>
                                    <div id="dia_c" class="dia-cabecalho">Qua</div>
                                    <div id="dia_c" class="dia-cabecalho">Qui</div>
                                    <div id="dia_c" class="dia-cabecalho">Sex</div>
                                    <div id="dia_c" class="dia-cabecalho">Sáb</div>
                    
                                    <!-- Dias de outubro de 2024 -->
                                    <div id="dia_inv" class="dia dia-invalido"></div>
                                    <div id="dia_inv" class="dia dia-invalido"></div>
                                    <div id="dia_n" class="dia">1</div>
                                    <div id="dia_n" class="dia">2</div>
                                    <div id="dia_n" class="dia">3</div>
                                    <div id="dia_n" class="dia">4</div>
                                    <div id="dia_n" class="dia">5</div>
                                    <div id="dia_n" class="dia">6</div>
                                    <div id="dia_n" class="dia">7</div>
                                    <div id="dia_n" class="dia">8</div>
                                    <div id="dia_n" class="dia">9</div>
                                    <div id="dia_n" class="dia">10</div>
                                    <div id="dia_n" class="dia">11</div>
                                    <div id="dia_n" class="dia">12</div>
                                    <div id="dia_n" class="dia">13</div>
                                    <div id="dia_n" class="dia">14</div>
                                    <div id="dia_n" class="dia">15</div>
                                    <div id="dia_n" class="dia">16</div>
                                    <div id="dia_n" class="dia">17</div>
                                    <div id="dia_n" class="dia">18</div>
                                    <div id="dia_n" class="dia">19</div>
                                    <div id="dia_n" class="dia">20</div>
                                    <div id="dia_n" class="dia">21</div>
                                    <div id="dia_n" class="dia">22</div>
                                    <div id="dia_n" class="dia">23</div>
                                    <div id="dia_n" class="dia">24</div>
                                    <div id="dia_n" class="dia dia-marcado">25</div>
                                    <div id="dia_n" class="dia">26</div>
                                    <div id="dia_n" class="dia">27</div>
                                    <div id="dia_n" class="dia dia-marcado">28</div>
                                    <div id="dia_n" class="dia">29</div>
                                    <div id="dia_n" class="dia">30</div>
                                    <div id="dia_n" class="dia">31</div>
                                    <div id="dia_inv" class="dia dia-invalido"></div>
                                    <div id="dia_inv" class="dia dia-invalido"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="card-notif-container">
                        <h1>
                            Sobre mim
                        </h1>
                            <div class="card-sobre-container">
                        </div>
                    </div>
                </div>
                <div class="card-notif-container">
                    <div class="notif-titulo">Notificações</div>
                    
                    <div class="container-fluid card-notif-content">
                        <div class="row">
                            <div  id="notifSide" class="col card-notif-session card-notif-session-col-2 ">
                                <div class="notif-texto">
                                    Sessão do dia 25/10 <br>começa ás 18:00
                                </div>
                                <div style="display: flex; align-self: center;">
                                    <a href="stream-terapia.html">
                                        <button class="card-notif-btn" onclick="setTerapia(1)">Entrar</button>
                                    </a>
                                </div>
                            </div>  
                            <div  id="notifSide" class="col card-notif-session card-notif-session-col-2 ">
                                <div class="notif-texto">
                                    Sessão do dia 28/10 <br>começa ás 18:00
                                </div>
                                <div style="display: flex; align-self: center;">
                                    <a href="stream-terapia.html">
                                        <button class="card-notif-btn" onclick="setTerapia(2)">Entrar</button>
                                    </a>
                                </div>
                            </div>  
                        </div>
                    </div>

                </div>
            </div>
                <div class="card-notif-container" style="background-color: #D46240;">
                    <h1 style="color: white;">
                        Minha ficha
                    </h1>
                        <div class="card-sobre-container">
                    </div>
                </div>
        </div>
        </div>
    </section>

    <footer>
        <div class="grid-container" style="background-color: #F8A764; height:  265px;">
            <div class="container-fluid" style="padding-top: 4%;">
                <div class="row" style="padding-left: 15%;">
                    <div class="col">
                        <p>Sobre nós</p>
                        <p>Artigos</p>
                        <p>Termos e Acordos</p>
                    </div>
                    <div class="col">
                        <a href="./atri.html">
                        Atribuições</p>
                        </a>
                        
                        <p>Canal de denúncia</p>
                        <p>Contatos</p>
                    </div>
                </div>
                <div style="display: flex; justify-content: center;">
                    <hr style="width: 70%; height: 2px; color: #666;">
                </div>
                <div style="display: flex; justify-content: center;">
                    <p>&copy; Mind - 2024</p> 
                </div>
            </div>
        </div>
    </footer>

    <script type="text/javascript" defer>
        const diasMarcados = document.querySelectorAll('.dia-marcado'); 
        const diasMarcadosNotif = document.querySelectorAll('#notifSide'); 

        diasMarcados.forEach((dia, index) => {
            dia.addEventListener('click', () => {
                dia.classList.toggle('clicked');
                diasMarcadosNotif[index].classList.toggle('clicked');
                console.log(index)

                document.body.addEventListener('click', (event) => {
                    if (event.target !== dia) {
                        dia.classList.remove('clicked');
                        diasMarcadosNotif[index].classList.remove('clicked');
                    }
                });    
            });
        });

        function loadCalendar(){

            const today = new Date();
            const day = today.getDate();
            const month = today.getMonth();
            console.log(day);

            const diasValidos = document.querySelectorAll('#dia_n');
            
            diasValidos.forEach((dia, index) => {
                if (index + 1 === day){
                    console.log('index é '+month);
                
                    dia.classList.toggle('hoje');
                }
            });

            let diaInvColor = ['#d7ccf5', '#ffddaa', '#acaaff', '#c9ffc2', '#fff4b8',
            '#ffe9b8', '#b8ffca', '#ffeeb8', '#fffbc7', '#ffdfff', '#dfe1ff', '#ffdfdf'
            ]
            
            const diasInvalido = document.querySelectorAll('#dia_inv');
            diasInvalido.forEach((dia, index) => {
                dia.style.backgroundColor = diaInvColor[month];
            })


            let meses = ['Janeiro', 'Fevereiro', 'Março', 'Abril', 'Maio', 'Junho', 
            'Julho', 'Agosto', 'Setembro', 'Outubro', 'Novembro', 'Dezembro']
            
            const mName = document.querySelector('#monthName');
            
            const monthContrast = [4, 5, 7, 8, 11]

            if (monthContrast.includes(month)) {
                mName.innerHTML = '<span style=color:black>'+meses[month]+'</span>';
            } else {
                mName.innerHTML = '<span style=color:white>'+meses[month]+'</span>';
            }
        

            let cab = ['#9d64f8', '#f89a64', '#3438ff', '#64f878', '#ffee00',
                '#fc883a', '#64f864', 'gold', 'yellow', '#f864f1', '#2848ff', '#ff2833'
            ]

            const diasCa = document.querySelectorAll('#dia_c');
            diasCa.forEach((dia, index) => {
                const cla = document.getElementById('dia-cabecalho-'+month);
                dia.style.backgroundColor = cab[month];
                dia.style.border = '3px solid '+cab[month];
                if (monthContrast.includes(month)) {
                    dia.style.color = 'black';
                } else {
                    dia.style.color = 'white';
                }
            });
            

            let calendarColors = ['#9d64f8', '#f89a64', '#3438ff', '#64f878', '#ffee00',
                '#fc883a', '#64f864', 'gold', 'yellow', '#f864f1', 'blue', '#f81e30'
            ]

            const mContainer = document.getElementById('calendarContainer');
            mContainer.style.backgroundColor = calendarColors[month];
        }

    </script>
</html>